---
name: tdd
description: "执行一轮 TDD 红-绿-重构循环，严格按步骤推进"
user-invocable: true
allowed-tools: Read, Grep, Glob, Edit, Write, Bash
---

# TDD 红-绿-重构循环

执行一轮 TDD 循环来实现以下功能：$ARGUMENTS

严格按以下步骤执行，每步都要向我展示结果：

## 第一步：红（写失败测试）
1. 根据需求编写一个最小的、会失败的测试
2. 运行 `cargo test` 确认测试**失败**
3. 向我展示失败的测试输出

## 第二步：绿（最少代码通过）
1. 编写**刚好能让测试通过**的最少代码，不要过度设计
2. 运行 `cargo test` 确认**所有测试通过**
3. 向我展示通过的测试输出

## 第三步：重构
1. 审查代码，看是否有可以改进的地方（命名、结构、重复等）
2. 如果有改进，进行重构
3. 运行 `cargo test` 确认重构后**所有测试仍然通过**
4. 运行 `cargo clippy` 确认无警告

每一步完成后暂停，等我确认后再进入下一步。